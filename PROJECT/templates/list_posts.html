<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{% static 'style_posts.css' %}">
    <title>Posts</title>
</head>

<body>
    <form method="get" action="{% url 'all_posts' %}">
        <label for="choice">Кол-во постов на странице:</label>
        <select name="choice" id="choice" onchange="this.form.submit()">
            <option value="1" {% if selected_choice=='1' %}selected{% endif %}>1</option>
            <option value="2" {% if selected_choice=='2' %}selected{% endif %}>2</option>
            <option value="3" {% if selected_choice=='3' %}selected{% endif %}>3</option>
        </select>
    </form>
    {% for post in page_posts %}
    <ul>
        <li>
            <span class="post-author">{{ post.user.nickname }} ({{ post.user.name }})</span>
            <p><span class="post-title">{{ post.title }}</span><br>
                <span class="post-description">{{ post.description }}</span>
            </p>
            <p><span class="post-date">{{ post.date_published|date:"d M Y | H:i" }}</span></p>
        </li><br>
    </ul>
    {% endfor %}

    <div>
        <ul class="paginator">
            {% if page_posts.has_previous %}
            <li><a href="?page={{ page_posts.previous_page_number }}&choice={{selected_choice}}">пред.</a></li>
            {% endif %}
            {% if not page_posts.has_previous %}
            <li class="disabled"><a href="#">пред.</a></li>
            {% endif %}

            {% for page in all_pages %}
            <li>
                {% if page == page_posts.number %}
                <span class="active"><a href="?page={{ page }}&choice={{selected_choice}}">{{ page }}</a></span>
                {% else %}
                <a href="?page={{ page }}&choice={{selected_choice}}">{{ page }}</a>
                {% endif %}
            </li>
            {% endfor %}

            {% if page_posts.has_next %}
            <li><a href="?page={{ page_posts.next_page_number }}&choice={{selected_choice}}">след.</a></li>
            {% endif %}
            {% if not page_posts.has_next %}
            <li class="disabled"><a href="#">след.</a></li>
            {% endif %}
        </ul>
    </div>
</body>

</html>